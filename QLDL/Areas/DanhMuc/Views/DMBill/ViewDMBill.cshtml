@model IEnumerable<QLDL.EF.DMBill>

<h4>
    <b>Số Bill</b> 
</h4>
<div class="table-responsive">
        <table class="table table-bordered table-hover table-striped" id="dataTable" width="100%">
            <thead>
                <tr>
                    <th width="1%"><input type='checkbox' id='check' value='' /></th>
                    <th></th>
                    <th>Số tờ khai</th>
                    <th>Mã Bill</th>
                    <th>Số lượng cont</th>
                    <th>Tàu đến</th>
                    <th>Khách Hàng</th>
                    <th>Cảng Nhận</th>
                    <th>Cảng Trả</th>
                    <th>Hạn Lưu Bãi</th>
                    <th>Hạn Lưu Cont</th>
                    <th>Hạn Lưu Rỗng</th>
                    <th>#</th>
                </tr>
            </thead>
            <tbody>

                @foreach (var item in Model)
                {
                <tr id="row_@item.Id">

                    <td width="1%"><input type='checkbox' name='chkId[]' id='checkbox' value="@item.Id" /></td>

                    <td width="1%">@Html.ActionLink("Chi tiết", "CTBill", new { id = item.Id }, new { @class = "btn btn-primary mb-1" })</td>
                    <td>@(item.SoToKhai != null ? Html.ActionLink(item.SoToKhai, "CTBill", new { id = item.Id }) : null)</td>
                    <td>@Html.ActionLink(item.MaBill, "CTBill", new { id = item.Id })</td>
                    @{ var cont = item.CTBills.Where(x => x.Bill == item.Id).ToList();}
                    <td>@cont.Count()</td>
                    <td>@(item.NgayTauDen != null ? item.NgayTauDen.Value.ToShortDateString() : null)</td>
                    <td>@(item.KhachHang != null ? item.DMKhachHang.TenCongTy : null)</td>
                    <td>@(item.CangNhan != null ?  item.DMCang.TenCang : null)</td>
                    <td>@(item.CangTra != null ? item.DMCang1.TenCang : null)</td>
                    @{ var hanluubai = item.CTBills.Where(x => x.Bill == item.Id).FirstOrDefault();}
                    @if (hanluubai != null)
                    {
                        <td> @(hanluubai.HanLuuBai != null ? hanluubai.HanLuuBai.Value.ToShortDateString() : "Chưa nhập Cont")</td>
                        var hanluucont = item.CTBills.Where(x => x.Bill == item.Id).FirstOrDefault();
                        <td> @(hanluucont.HanLuuCont != null ? hanluucont.HanLuuCont.Value.ToShortDateString() : null)</td>
                        var hanluurong = item.CTBills.Where(x => x.Bill == item.Id).FirstOrDefault();
                        <td> @(hanluurong.HanLuuRong != null ? hanluurong.HanLuuRong.Value.ToShortDateString() : null)</td>

                    }
                    else
                    {
                        <td style="color:red">chưa nhập Cont</td>
                        <td style="color:red">chưa nhập Cont</td>
                        <td style="color:red">chưa nhập Cont</td>
                    }
                    <td>
                        @Html.ActionLink("Chỉnh sửa", "Update", new { id = item.Id }, new { @class = "btn btn-primary mb-1" })
                    </td>
                </tr>
                }
            </tbody>

        </table>
        <div class="form-group">
            <input type="submit" value="Xóa" name="delete" id="delete" class="btn btn-warning" />
        </div>
</div>



